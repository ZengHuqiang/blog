<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Java反射 · 空空白的博客</title><meta name="description" content="Java反射 - kongkongbai"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.kongkongbai.comundefined" title="空空白的博客"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="空空白的博客" type="application/atom+xml">
</head><body><div class="wrap"><header><a class="logo-link" href="/"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="/categories/" target="_self">CATEGORY</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/zenghuqiang" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/friends/" target="_self">FRIENDS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Java反射</h1><div class="post-info">May 13, 2020<a class="tag-title" href="/tags/Java/">#Java</a></div><div class="post-content"><h3 id="1-反射机制的作用"><a href="#1-反射机制的作用" class="headerlink" title="1.反射机制的作用"></a>1.反射机制的作用</h3><ul>
<li>运行时判断任意一个对象所属的类</li>
<li>在运行时获取类的对象</li>
<li>在运行时访问java对象的属性、方法、构造方法等</li>
</ul>
<h3 id="2-类库：java-lang-reflect"><a href="#2-类库：java-lang-reflect" class="headerlink" title="2.类库：java.lang.reflect"></a>2.类库：java.lang.reflect</h3><ul>
<li>Field：表示类中的<strong>成员变量</strong></li>
<li>Method：表示类中的<strong>方法</strong></li>
<li>Constructor：表示类的<strong>构造方法</strong></li>
<li>Array：该类提供<strong>动态创建数组和访问数组元素</strong>的静态方法</li>
</ul>
<h3 id="3-反射依赖的Class"><a href="#3-反射依赖的Class" class="headerlink" title="3.反射依赖的Class"></a>3.反射依赖的Class</h3><p><strong>用来表示运行时类型信息的对应类</strong></p>
<ul>
<li>每个类都有<strong>唯一</strong>一个与之相对应的Class对象（每当创建类实例或者调用类静态变量或方法时，ClassLoader会将该类加载到JVM中）</li>
<li>Class类为类类型，而Class对象为类类型对象</li>
</ul>
<h4 id="3-1Class类特点"><a href="#3-1Class类特点" class="headerlink" title="3.1Class类特点"></a>3.1Class类特点</h4><ul>
<li>Class类也是类的一种，class则是关键字</li>
<li>Class类只有一个<strong>私有的构造函数</strong>，只有JVM能够创建Class类的实例</li>
</ul>
<p><a href="http://39.107.124.120/wp-content/uploads/2020/04/Class类特点01.png" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/0c51b5d7a87a9fc22099fbe2adf1c35d.png" alt="Class类特点01"></a></p>
<ul>
<li>JVM中只有<strong>唯一一个和类相对应的Class对象</strong>来描述其类型信息</li>
</ul>
<h4 id="3-2获取Class对象的三种方式"><a href="#3-2获取Class对象的三种方式" class="headerlink" title="3.2获取Class对象的三种方式"></a>3.2获取Class对象的三种方式</h4><p><a href="http://39.107.124.120/wp-content/uploads/2020/04/Class对象的获取.png" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/6ea1f8f5d751a9558d49e0da4fdf7a90.png" alt="Class对象的获取"></a></p>
<ul>
<li>Object–&gt;getClass()</li>
<li>任意数据类型（包括基本数据类型）都有一个“静态”的class属性</li>
<li>通过Class类的静态方法：<strong>forName（String className）最常用（不需要导入相关包或者获取对象，只需要知道类路径即可）</strong></li>
</ul>
<h3 id="4-反射的主要用法"><a href="#4-反射的主要用法" class="headerlink" title="4.反射的主要用法"></a>4.反射的主要用法</h3><h4 id="4-1获取类的构造函数"><a href="#4-1获取类的构造函数" class="headerlink" title="4.1获取类的构造函数"></a>4.1获取类的构造函数</h4><p><a href="http://39.107.124.120/wp-content/uploads/2020/04/反射获取构造方法.png" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/374f098c193599cefa9cebcf6520929d.png" alt="反射获取构造方法"></a></p>
<p><strong>1.批量的方法：</strong></p>
<ul>
<li>public Constructor[] getConstructors() : 获取<strong>所有的“公有”</strong>构造方法</li>
<li>public Constructor[] <strong>getDeclaredConstructors()</strong> : 获取<strong>所有的</strong>构造方法（包括私有、受保护、默认和公有的）</li>
</ul>
<p><strong>2.获取单个的方法（需要传入相应参数类型对应的class对象）：</strong></p>
<ul>
<li>public Constructor <strong>getConstructor(Class… parameterTypes)</strong> : 获取单个公有的构造方法</li>
<li>public Constructor <strong>getDeclaredConstructor(Class… parameterTypes)</strong>:获取“某个构造方法”可以是私有、受保护、公有的</li>
</ul>
<p><strong>调用构造方法：</strong></p>
<p>Constructor –&gt;newInstance（Object… initArgs）</p>
<p><a href="http://39.107.124.120/wp-content/uploads/2020/04/反射调用私有构造方法.png" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/def9a9fcf15f48cfe0741f0d4c3851d1.png" alt="反射调用私有构造方法"></a></p>
<p><strong>在调用私有方法时</strong>，需要设置con.<strong>setAccessible(true);</strong></p>
<h4 id="4-2获取类的成员变量"><a href="#4-2获取类的成员变量" class="headerlink" title="4.2获取类的成员变量"></a>4.2获取类的成员变量</h4><p><a href="http://39.107.124.120/wp-content/uploads/2020/04/反射获取成员变量实例.png" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/21daacf681eed1d8b08d00459057da49.png" alt="反射获取成员变量实例"></a></p>
<p><a href="http://39.107.124.120/wp-content/uploads/2020/04/反射获取成员变量.jpg" target="_blank" rel="noopener"><img src="https://pic.rmb.bdstatic.com/bjh/other/c119cd927c0acb5be12d9310331e81d9.jpeg" alt="反射获取成员变量"></a></p>
<ul>
<li>使用set设置实例对象的属性值：<strong>filed.set(实例对象，参数值)</strong></li>
<li>在设置私有变量时，需要设置<strong>field.setAccessible(true)</strong></li>
</ul>
<p><strong>在继承字段方面的区别：</strong></p>
<ul>
<li>getDeclaredField 和 getDeclaredFields 方法获取的字段都不能包含继承字段</li>
<li><strong>getField 和 getFields可以获取继承字段</strong></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/JavaGeneric/">上一篇</a><a class="next" href="/Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Java-Multithreading-02/">下一篇</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><div id="gitalk-container"></div><script>const gitalk = new Gitalk({
    clientID: '2cdbd7aa1fe9fd30e3c5',     
    clientSecret: '0d12d75f0e1788ffc85796b5a38bdddbbf40c77d',     
    id: window.location.pathname,    
    repo: 'blog',     
    owner: 'zenghuqiang',     
    admin: 'zenghuqiang',     
})   
gitalk.render('gitalk-container')
</script><div class="copyright"><p>© 2020 <a href="http://www.kongkongbai.com">kongkongbai</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/achjqz/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-e/4/LvThKH1gwzXhdbY2AsjR3rm7LHWyhIG5C0jiRfn8AN2eTN5ILeztWw0H9jmN" crossorigin="anonymous"></script><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/styles/github-gist.min.css"><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/highlight.min.js"></script><script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/dockerfile.min.js"></script><script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/x86asm.min.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>